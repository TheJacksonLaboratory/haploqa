/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright: Cory LaViska for A Beautiful Site, LLC: http://www.abeautifulsite.net/
 *
 * Contribute: https://github.com/claviska/jquery-minicolors
 *
 * @license: http://opensource.org/licenses/MIT
 *
 */
!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function($){function i(i,t){var a=$('<div class="minicolors" />'),o=$.minicolors.defaults,s=i.attr("data-format"),n=i.attr("data-keywords"),e=i.attr("data-opacity");i.data("minicolors-initialized")||(t=$.extend(!0,{},o,t),a.addClass("minicolors-theme-"+t.theme).toggleClass("minicolors-with-opacity",t.opacity).toggleClass("minicolors-no-data-uris",t.dataUris!==!0),void 0!==t.position&&$.each(t.position.split(" "),function(){a.addClass("minicolors-position-"+this)}),"rgb"===s?$input_size=e?"25":"20":$input_size=n?"11":"7",i.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",t).prop("size",$input_size).wrap(a).after('<div class="minicolors-panel minicolors-slider-'+t.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),t.inline||(i.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>'),i.next(".minicolors-swatch").on("click",function(t){t.preventDefault(),i.focus()})),i.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),t.inline&&i.parent().addClass("minicolors-inline"),r(i,!1),i.data("minicolors-initialized",!0))}function t(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(i).remove()}function a(i){var t=i.parent(),a=t.find(".minicolors-panel"),s=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(o(),t.addClass("minicolors-focus"),a.stop(!0,!0).fadeIn(s.showSpeed,function(){s.show&&s.show.call(i.get(0))}))}function o(){$(".minicolors-focus").each(function(){var i=$(this),t=i.find(".minicolors-input"),a=i.find(".minicolors-panel"),o=t.data("minicolors-settings");a.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(t.get(0)),i.removeClass("minicolors-focus")})})}function s(i,t,a){var o=i.parents(".minicolors").find(".minicolors-input"),s=o.data("minicolors-settings"),r=i.find("[class$=-picker]"),e=i.offset().left,c=i.offset().top,l=Math.round(t.pageX-e),h=Math.round(t.pageY-c),d=a?s.animationSpeed:0,u,p,g,m;t.originalEvent.changedTouches&&(l=t.originalEvent.changedTouches[0].pageX-e,h=t.originalEvent.changedTouches[0].pageY-c),0>l&&(l=0),0>h&&(h=0),l>i.width()&&(l=i.width()),h>i.height()&&(h=i.height()),i.parent().is(".minicolors-slider-wheel")&&r.parent().is(".minicolors-grid")&&(u=75-l,p=75-h,g=Math.sqrt(u*u+p*p),m=Math.atan2(p,u),0>m&&(m+=2*Math.PI),g>75&&(g=75,l=75-75*Math.cos(m),h=75-75*Math.sin(m)),l=Math.round(l),h=Math.round(h)),i.is(".minicolors-grid")?r.stop(!0).animate({top:h+"px",left:l+"px"},d,s.animationEasing,function(){n(o,i)}):r.stop(!0).animate({top:h+"px"},d,s.animationEasing,function(){n(o,i)})}function n(i,t){function a(i,t){var a,o;return i.length&&t?(a=i.offset().left,o=i.offset().top,{x:a-t.offset().left+i.outerWidth()/2,y:o-t.offset().top+i.outerHeight()/2}):null}var o,s,n,r,c,l,d,u=i.val(),p=i.attr("data-format"),m=i.attr("data-keywords"),f=i.attr("data-opacity"),v=i.parent(),b=i.data("minicolors-settings"),y=v.find(".minicolors-swatch"),C=v.find(".minicolors-grid"),M=v.find(".minicolors-slider"),x=v.find(".minicolors-opacity-slider"),z=C.find("[class$=-picker]"),I=M.find("[class$=-picker]"),S=x.find("[class$=-picker]"),F=a(z,C),j=a(I,M),D=a(S,x);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(b.control){case"wheel":r=C.width()/2-F.x,c=C.height()/2-F.y,l=Math.sqrt(r*r+c*c),d=Math.atan2(c,r),0>d&&(d+=2*Math.PI),l>75&&(l=75,F.x=69-75*Math.cos(d),F.y=69-75*Math.sin(d)),s=g(l/.75,0,100),o=g(180*d/Math.PI,0,360),n=g(100-Math.floor(j.y*(100/M.height())),0,100),u=w({h:o,s:s,b:n}),M.css("backgroundColor",w({h:o,s:s,b:100}));break;case"saturation":o=g(parseInt(F.x*(360/C.width()),10),0,360),s=g(100-Math.floor(j.y*(100/M.height())),0,100),n=g(100-Math.floor(F.y*(100/C.height())),0,100),u=w({h:o,s:s,b:n}),M.css("backgroundColor",w({h:o,s:100,b:n})),v.find(".minicolors-grid-inner").css("opacity",s/100);break;case"brightness":o=g(parseInt(F.x*(360/C.width()),10),0,360),s=g(100-Math.floor(F.y*(100/C.height())),0,100),n=g(100-Math.floor(j.y*(100/M.height())),0,100),u=w({h:o,s:s,b:n}),M.css("backgroundColor",w({h:o,s:s,b:100})),v.find(".minicolors-grid-inner").css("opacity",1-n/100);break;default:o=g(360-parseInt(j.y*(360/M.height()),10),0,360),s=g(Math.floor(F.x*(100/C.width())),0,100),n=g(100-Math.floor(F.y*(100/C.height())),0,100),u=w({h:o,s:s,b:n}),C.css("backgroundColor",w({h:o,s:100,b:100}))}if(f=b.opacity?parseFloat(1-D.y/x.height()).toFixed(2):1,b.opacity&&i.attr("data-opacity",f),"rgb"===p){var T=k(u),f=""===i.attr("data-opacity")?1:g(parseFloat(i.attr("data-opacity")).toFixed(2),0,1);(isNaN(f)||!b.opacity)&&(f=1),i.minicolors("rgbObject").a<=1&&T&&b.opacity?value="rgba("+T.r+", "+T.g+", "+T.b+", "+parseFloat(f)+")":value="rgb("+T.r+", "+T.g+", "+T.b+")"}else value=h(u,b.letterCase);i.val(value)}y.find("span").css({backgroundColor:u,opacity:f}),e(i,value,f)}function r(i,t){var a,o,s=i.attr("data-format"),n=i.attr("data-keywords"),r,c,l,v,y,M=i.parent(),k=i.data("minicolors-settings"),x=M.find(".minicolors-swatch"),z=M.find(".minicolors-grid"),I=M.find(".minicolors-slider"),S=M.find(".minicolors-opacity-slider"),F=z.find("[class$=-picker]"),j=I.find("[class$=-picker]"),D=S.find("[class$=-picker]");switch(m(i.val())?(a=b(i.val()),alpha=g(parseFloat(f(i.val())).toFixed(2),0,1),alpha&&i.attr("data-opacity",alpha)):a=h(d(i.val(),!0),k.letterCase),a||(a=h(p(k.defaultValue,!0),k.letterCase)),o=C(a),n=n?$.map(n.split(","),function(i){return $.trim(i.toLowerCase())}):[],""!==i.val()&&$.inArray(i.val().toLowerCase(),n)>-1?value=h(i.val()):value=m(i.val())?u(i.val()):a,t||i.val(value),k.opacity&&(r=""===i.attr("data-opacity")?1:g(parseFloat(i.attr("data-opacity")).toFixed(2),0,1),isNaN(r)&&(r=1),i.attr("data-opacity",r),x.find("span").css("opacity",r),l=g(S.height()-S.height()*r,0,S.height()),D.css("top",l+"px")),"transparent"===i.val().toLowerCase()&&x.find("span").css("opacity",0),x.find("span").css("backgroundColor",a),k.control){case"wheel":v=g(Math.ceil(.75*o.s),0,z.height()/2),y=o.h*Math.PI/180,c=g(75-Math.cos(y)*v,0,z.width()),l=g(75-Math.sin(y)*v,0,z.height()),F.css({top:l+"px",left:c+"px"}),l=150-o.b/(100/z.height()),""===a&&(l=0),j.css("top",l+"px"),I.css("backgroundColor",w({h:o.h,s:o.s,b:100}));break;case"saturation":c=g(5*o.h/12,0,150),l=g(z.height()-Math.ceil(o.b/(100/z.height())),0,z.height()),F.css({top:l+"px",left:c+"px"}),l=g(I.height()-o.s*(I.height()/100),0,I.height()),j.css("top",l+"px"),I.css("backgroundColor",w({h:o.h,s:100,b:o.b})),M.find(".minicolors-grid-inner").css("opacity",o.s/100);break;case"brightness":c=g(5*o.h/12,0,150),l=g(z.height()-Math.ceil(o.s/(100/z.height())),0,z.height()),F.css({top:l+"px",left:c+"px"}),l=g(I.height()-o.b*(I.height()/100),0,I.height()),j.css("top",l+"px"),I.css("backgroundColor",w({h:o.h,s:o.s,b:100})),M.find(".minicolors-grid-inner").css("opacity",1-o.b/100);break;default:c=g(Math.ceil(o.s/(100/z.width())),0,z.width()),l=g(z.height()-Math.ceil(o.b/(100/z.height())),0,z.height()),F.css({top:l+"px",left:c+"px"}),l=g(I.height()-o.h/(360/I.height()),0,I.height()),j.css("top",l+"px"),z.css("backgroundColor",w({h:o.h,s:100,b:100}))}i.data("minicolors-initialized")&&e(i,value,r)}function e(i,t,a){var o=i.data("minicolors-settings"),s=i.data("minicolors-lastChange");s&&s.value===t&&s.opacity===a||(i.data("minicolors-lastChange",{value:t,opacity:a}),o.change&&(o.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout(function(){o.change.call(i.get(0),t,a)},o.changeDelay))):o.change.call(i.get(0),t,a)),i.trigger("change").trigger("input"))}function c(i){var t=d($(i).val(),!0),a=k(t),o=$(i).attr("data-opacity");return a?(void 0!==o&&$.extend(a,{a:parseFloat(o)}),a):null}function l(i,t){var a=d($(i).val(),!0),o=k(a),s=$(i).attr("data-opacity");return o?(void 0===s&&(s=1),t?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(s)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}function h(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function d(i,t){return i=i.replace(/^#/g,""),i.match(/^[A-F0-9]{3,6}/gi)?3!==i.length&&6!==i.length?"":(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i):""}function u(i,t){var a=i.replace(/[^\d,.]/g,""),o=a.split(","),s;return o[0]=g(parseInt(o[0],10),0,255),o[1]=g(parseInt(o[1],10),0,255),o[2]=g(parseInt(o[2],10),0,255),o[3]&&(o[3]=g(parseFloat(o[3],10),0,1)),t?{r:o[0],g:o[1],b:o[2],a:o[3]?o[3]:null}:"undefined"!=typeof o[3]&&o[3]<=1?"rgba("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+")":"rgb("+o[0]+", "+o[1]+", "+o[2]+")"}function p(i,t){return m(i)?u(i):d(i,t)}function g(i,t,a){return t>i&&(i=t),i>a&&(i=a),i}function m(i){return rgb=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),rgb&&4===rgb.length?!0:!1}function f(i){return i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),i&&6===i.length?i[4]:"1"}function v(i){var t={},a=Math.round(i.h),o=Math.round(255*i.s/100),s=Math.round(255*i.b/100);if(0===o)t.r=t.g=t.b=s;else{var n=s,r=(255-o)*s/255,e=(n-r)*(a%60)/60;360===a&&(a=0),60>a?(t.r=n,t.b=r,t.g=r+e):120>a?(t.g=n,t.b=r,t.r=n-e):180>a?(t.g=n,t.r=r,t.b=r+e):240>a?(t.b=n,t.r=r,t.g=n-e):300>a?(t.b=n,t.g=r,t.r=r+e):360>a?(t.r=n,t.g=r,t.b=n-e):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function b(i){return i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),i&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}function y(i){var t=[i.r.toString(16),i.g.toString(16),i.b.toString(16)];return $.each(t,function(i,a){1===a.length&&(t[i]="0"+a)}),"#"+t.join("")}function w(i){return y(v(i))}function C(i){var t=M(k(i));return 0===t.s&&(t.h=360),t}function M(i){var t={h:0,s:0,b:0},a=Math.min(i.r,i.g,i.b),o=Math.max(i.r,i.g,i.b),s=o-a;return t.b=o,t.s=0!==o?255*s/o:0,0!==t.s?i.r===o?t.h=(i.g-i.b)/s:i.g===o?t.h=2+(i.b-i.r)/s:t.h=4+(i.r-i.g)/s:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function k(i){return i=parseInt(i.indexOf("#")>-1?i.substring(1):i,16),{r:i>>16,g:(65280&i)>>8,b:255&i}}$.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},$.extend($.fn,{minicolors:function(s,n){switch(s){case"destroy":return $(this).each(function(){t($(this))}),$(this);case"hide":return o(),$(this);case"opacity":return void 0===n?$(this).attr("data-opacity"):($(this).each(function(){r($(this).attr("data-opacity",n))}),$(this));case"rgbObject":return c($(this),"rgbaObject"===s);case"rgbString":case"rgbaString":return l($(this),"rgbaString"===s);case"settings":return void 0===n?$(this).data("minicolors-settings"):($(this).each(function(){var i=$(this).data("minicolors-settings")||{};t($(this)),$(this).minicolors($.extend(!0,i,n))}),$(this));case"show":return a($(this).eq(0)),$(this);case"value":return void 0===n?$(this).val():($(this).each(function(){"object"==typeof n?(n.opacity&&$(this).attr("data-opacity",g(n.opacity,0,1)),n.color&&$(this).val(n.color)):$(this).val(n),r($(this))}),$(this));default:return"create"!==s&&(n=s),$(this).each(function(){i($(this),n)}),$(this)}}}),$(document).on("mousedown.minicolors touchstart.minicolors",function(i){$(i.target).parents().add(i.target).hasClass("minicolors")||o()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(i){var t=$(this);i.preventDefault(),$(document).data("minicolors-target",t),s(t,i,!0)}).on("mousemove.minicolors touchmove.minicolors",function(i){var t=$(document).data("minicolors-target");t&&s(t,i)}).on("mouseup.minicolors touchend.minicolors",function(){$(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(i){var t=$(this).parent().find(".minicolors-input");i.preventDefault(),a(t)}).on("focus.minicolors",".minicolors-input",function(){var i=$(this);i.data("minicolors-initialized")&&a(i)}).on("blur.minicolors",".minicolors-input",function(){var i=$(this),t=i.attr("data-keywords"),a=i.data("minicolors-settings"),o,s,n;i.data("minicolors-initialized")&&(t=t?$.map(t.split(","),function(i){return $.trim(i.toLowerCase())}):[],""!==i.val()&&$.inArray(i.val().toLowerCase(),t)>-1?value=i.val():(m(i.val())?s=u(i.val(),!0):(o=d(i.val(),!0),s=o?k(o):null),null===s?value=a.defaultValue:"rgb"===a.format?value=u(a.opacity?"rgba("+s.r+","+s.g+","+s.b+","+i.attr("data-opacity")+")":"rgb("+s.r+","+s.g+","+s.b+")"):value=y(s)),n=a.opacity?i.attr("data-opacity"):1,"transparent"===value.toLowerCase()&&(n=0),i.closest(".minicolors").find(".minicolors-swatch > span").css("opacity",n),i.val(value),""===i.val()&&i.val(p(a.defaultValue,!0)),i.val(h(i.val(),a.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(i){var t=$(this);if(t.data("minicolors-initialized"))switch(i.keyCode){case 9:o();break;case 13:case 27:o(),t.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var i=$(this);i.data("minicolors-initialized")&&r(i,!0)}).on("paste.minicolors",".minicolors-input",function(){var i=$(this);i.data("minicolors-initialized")&&setTimeout(function(){r(i,!0)},1)})});