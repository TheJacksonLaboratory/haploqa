{% extends "layout.html" %}

{% block title %}HaploQA{% endblock %}

{% block content %}
    <div class="page-header">
        <h1>HaploQA</h1>
    </div>
    <p class="intro">
        HaploQA is a software platform that provides interpretation of genotype calls from the Mouse Universal
        Genotyping array platforms (including Mega-/Giga- MUGA) that are available from
        <a href="http://genomics.neogen.com/en/research-and-development-genomic-discovery#mouse">Neogen Genomics</a>
        (Morgan et al., 2015). The software allows for direct upload of sample and genotype data, sample annotation,
        and organization by users. The software interprets genotype calls and uses established Hidden Markov Models
        that were generated by Dr. Gary Churchill’s laboratory to generate haplotypes with negative log likelihood
        scoring. There are additional options for interfacing with the data through a web-based graphics, links out
        to widely used genome browsers, data/image/report downloads, and options for making the data public. If you
        want to read more about MUGA platforms the following is a great resource:
    </p>
    <p class="padding-left">
        Morgan AP et al.<br/>The Mouse Universal Genotyping Array: From Substrains to Subspecies.<br/>
        <a href="http://www.g3journal.org/content/6/2/263.long">G3 (Bethesda)</a>. 2015 Dec 18;6(2):263-79. doi:
        10.1534/g3.115.022087. <br/>PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/26684931">26684931</a>; PMCID:
        <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4751547/">PMC4751547</a>
    </p>
    <br/>

    {% if not user %}
        <p class="intro"><b>
            To get started with HaploQA, you may browse the public data listed below. However, if you wish to upload your
            own data, you'll need to have an account. You can login in the upper right corner if you already have one;
            otherwise, please send an email to <a href="mailto:haploqa@jax.org" target="_top">haploqa@jax.org</a> to have
            one set up for you.
        </b></p>
        <br/>
    {% endif %}

    {% if user %}
        <p class="intro"><b>
            To get started, use the “Import Sample Data” link in the header or
            <a href="{{ url_for('sample_data_import_html') }}">click here</a> to the data upload page. From here
            you can directly upload the “Sample_Map.txt” and “…_FinalReport.txt” files provided to you by your
            MUGA genotyping provider (Neogen).
        </b></p>
        <br/>

        <div class="page-header">
            <h2>My Samples</h2>
        </div>

        <div class="row">
            {% if my_tags %}
            <div class="col-md-12">
                Select any of the following tags to view or edit samples:
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Sample Tag</th>
                            <th>Sample Count</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for my_tag in my_tags %}
                        <tr>
                            <td><a href="{{ url_for('owner_tags', tag_id=my_tag.name) }}">{{ my_tag.name }}</a></td>
                            <td>{{ my_tag.sample_count }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            You do not have any samples
            {% endif %}
        </div>
    {% endif %}

    <div class="page-header">
        <h2>All Samples</h2>
    </div>
    <div class="row">
        <div class="col-md-12">
            Select any of the following tags to view or edit samples:

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Sample Tag</th>
                        <th>Sample Count</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="{{ url_for('all_samples_html') }}">all samples (includes untagged samples)</a></td>
                        <td>{{ total_sample_count }}</td>
                    </tr>
                    {% for tag in tags %}
                    <tr>
                        <td><a href="{{ url_for('sample_tag_html', tag_id=tag.name) }}">{{ tag.name }}</a></td>
                        <td>{{ tag.sample_count }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
